<form name="form" class="form-horizontal form-modal " method="post" action="">
  <div class="modal-header">
    <button type="button" class="close" ng-click="cancel()">&times;</button>
    <h4 class="modal-title">案件信息</h4>
  </div>
  <div class="modal-body" id="info-edit-body">
    <ul class="entity-navbar">
      <li><a href="javascript:void(0)"  ng-click="gotoAnchor('overrun-edit-checklist')">初检单</a></li>
      <li><a href="javascript:void(0)" ng-click="gotoAnchor('overrun-edit-vehicle')">车辆信息</a></li>
      <li><a href="javascript:void(0)" ng-click="gotoAnchor('overrun-edit-driver')">驾驶员信息</a></li>
      <li><a href="javascript:void(0)" ng-click="gotoAnchor('overrun-edit-party')">当事人信息</a></li>
      <li><a href="javascript:void(0)" ng-click="gotoAnchor('overrun-edit-case')">案件信息</a></li>
      <li><a href="javascript:void(0)" ng-click="gotoAnchor('overrun-edit-reChecklist')">复检单</a></li>
    </ul>
    <div class="entity-block-wrap under-navbar" ng-if="modal.contentShow">
      <!--初检单-->
      <div id="overrun-edit-checklist" class="entity-block under-navbar">
        <header class="entity-block--header">
          <i class="entity-icon icon-checklist"></i>
          <span>初检单</span>
        </header>
        <div class="entity-block--body">
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">单号</label>
              <input type="text" class="form-control" name="cjdh" ng-model="item.cjdh" validator="required"
                     autofocus="autofocus"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">时间</label>
              <input type="text" class="form-control" ng-model="item.cjsj" readonly
                     today-text="今天" now-text="现在" date-text="日期"
                     time-text="时刻" clear-text="清空" close-text="关闭"
                     datetime-picker="yyyy-MM-dd HH:mm"
                     datepicker-options="dateOptions"
                     timepicker-options="timeOptions"
                     is-open="openDatepicker.cjsj"
                     ng-click="openCalendar($event, 'cjsj')"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">超限类型</label>

              <div class="entity-input dropdown" dropdown>
                <button type="button" class="form-control btn btn-default dropdown-toggle" dropdown-toggle>
                  <span>{{ item.cxlx }}</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li ng-repeat="type in overrunTypes" ng-class="(type.name === selectedOverrunType.name)? 'disabled':''">
                    <a href="javascript:void(0)" ng-click="setOverrunType(type)">{{type.name}}</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">可否卸载</label>

              <div class="entity-input dropdown" dropdown>
                <button type="button" class="form-control btn btn-default dropdown-toggle" dropdown-toggle>
                  <span>{{ item.kfxz }}</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li ng-repeat="type in unloadTypes" ng-class="(type.name === selectedUnloadType.name)? 'disabled':''">
                    <a href="javascript:void(0)" ng-click="setUnloadType(type)">{{type.name}}</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">车牌</label>
              <input type="text" class="form-control" name="xccfCl.cp" ng-model="item.xccfCl.cp" validator="required"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">轴数</label>
              <input type="text" class="form-control" name="xccfCl.zs" ng-model="item.xccfCl.zs" validator="required"
                     validator="required, number"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">{{ typeLabel }}</label>
              <input type="text" class="form-control" name="checklistValue" ng-model="checklistValue" validator="required, number"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">{{ overTypeLabel }}</label>

              <div class="input-group">
                <input type="text" class="entity-input form-control" name="checklistOverValue" ng-model="checklistOverValue"
                       validator="required, number" message-id="checklist-overvalue-msg"/>

                <div class="input-group-btn">
                  <button class="btn btn-default fa-calculator" type="button"
                          ng-click="calcChecklistOverValue()"></button>
                </div>
              </div>
              <span id="checklist-overvalue-msg"></span>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">货物名称</label>
              <input type="text" class="form-control" name="hwmc" ng-model="item.hwmc"/>
            </div>
            <div class="col-sm-6">
              <label class="entity-label">运货起点</label>
              <input type="text" class="form-control" name="hyqd" ng-model="item.hyqd"/>
            </div>
            <div class="col-sm-6">
              <label class="entity-label">运货目的地</label>
              <input type="text" class="form-control" name="hymd" ng-model="item.hymd"/>
            </div>
          </div>
        </div>
      </div>
      <!--车辆信息-->
      <div id="overrun-edit-vehicle" class="entity-block">
        <header class="entity-block--header">
          <i class="entity-icon icon-vehicle"></i>
          <span>车辆信息</span>
        </header>
        <div class="entity-block--body">
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">车头</label>
              <input type="text" class="form-control" name="xccfCl.ct" ng-model="item.xccfCl.ct"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">挂车</label>
              <input type="text" class="form-control" name="xccfCl.gc" ng-model="item.xccfCl.gc"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">核定载质量</label>
              <input type="text" class="form-control" name="xccfCl.hdzzl" ng-model="item.xccfCl.hdzzl"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">整备质量</label>
              <input type="text" class="form-control" name="xccfCl.zbzl" ng-model="item.xccfCl.zbzl"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-8">
              <label class="entity-label">车籍地</label>
              <input type="text" class="form-control" name="xccfCl.cjd" ng-model="item.xccfCl.cjd"/>
            </div>
            <div class="col-sm-8">
              <label class="entity-label">车辆类型</label>
              <input type="text" class="form-control" name="xccfCl.cllx" ng-model="item.xccfCl.cllx"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-16">
              <label class="entity-label">所有人</label>
              <input type="text" class="form-control" name="xccfCl.syr" ng-model="item.xccfCl.syr"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-16">
              <label class="entity-label">住址</label>
              <input type="text" class="form-control" name="xccfCl.syrzz" ng-model="item.xccfCl.syrzz"/>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-16">
            <label class="entity-label">上传车辆证件</label>

            <div class="entity-photo" ng-repeat="image in vehicleImages"
                 ng-click="openLightboxModal(vehicleImages, $index)">
              <img ng-src="{{image.thumbnaildata}}" alt="车辆证件"/>
            </div>
            <div ngf-drop ngf-select ng-model="vehicleFiles" class="entity-upload-photo drop-box"
                 ngf-drag-over-class="dragover" ngf-multiple="true" ngf-allow-dir="true"
                 ngf-accept="'image/*'"></div>
          </div>
        </div>
      </div>
      <!--驾驶员信息-->
      <div id="overrun-edit-driver" class="entity-block">
        <header class="entity-block--header">
          <i class="entity-icon icon-driver"></i>
          <span>驾驶员信息</span>
        </header>
        <div class="entity-block--body">
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">姓名</label>
              <input type="text" class="form-control" name="xccfJsy.xm" ng-model="item.xccfJsy.xm"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">性别</label>

              <div class="entity-input dropdown" dropdown>
                <button type="button" class="form-control btn btn-default dropdown-toggle" dropdown-toggle>
                  <span>{{ item.xccfJsy.xb }}</span><span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li ng-repeat="type in genderTypes" ng-class="(type.name === selectedGenderTypes.name)? 'disabled':''">
                    <a href="javascript:void(0)" ng-click="setGenderTypes(type)">{{type.name}}</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">驾驶证号</label>
              <input type="text" class="form-control" name="xccfJsy.jszh" ng-model="item.xccfJsy.jszh"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">从业资格证</label>
              <input type="text" class="form-control" name="xccfJsy.cyzgz" ng-model="item.xccfJsy.cyzgz"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">联系电话</label>
              <input type="text" class="form-control" name="xccfJsy.lxdh" ng-model="item.xccfJsy.lxdh"/>
            </div>
            <div class="col-sm-12">
              <label class="entity-label">住址</label>
              <input type="text" class="form-control" name="xccfJsy.zz" ng-model="item.xccfJsy.zz"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-16">
              <label class="entity-label">上传驾驶员证件</label>

              <div class="entity-photo" ng-repeat="image in driverImages"
                   ng-click="openLightboxModal(driverImages, $index)">
                <img ng-src="{{image.thumbnaildata}}" alt="驾驶员证件"/>
              </div>
              <div ngf-drop ng-model="driverFiles" class="entity-upload-photo drop-box"
                   ngf-drag-over-class="dragover" ngf-multiple="true" ngf-allow-dir="true"
                   ngf-accept="'image/*'"></div>
            </div>
          </div>
        </div>
      </div>
      <!--当事人信息-->
      <div id="overrun-edit-party" class="entity-block">
        <header class="entity-block--header">
          <i class="entity-icon icon-party"></i>
          <span>当事人信息</span>
        </header>
        <div class="entity-block--body">
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">当事人类型</label>

              <div class="entity-input dropdown" dropdown>
                <button type="button" class="form-control btn btn-default dropdown-toggle" dropdown-toggle>
                  <span>{{ item.xccfDsr.dsrlx }}</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li ng-repeat="type in partyTypes"
                      ng-class="(type.name === selectedPartyTypes.name)? 'disabled':''; type.isDisabled ? 'disabled': ''">
                    <a href="javascript:void(0)" ng-click="setPartyTypes(type)">{{type.name}}</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-8">
              <label class="entity-label">当事人</label>
              <input type="text" class="form-control" name="xccfDsr.dsr" ng-model="item.xccfDsr.dsr"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">法人</label>
              <input type="text" class="form-control" name="xccfDsr.fr" ng-model="item.xccfDsr.fr"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">营运证</label>
              <input type="text" class="form-control" name="xccfDsr.yyz" ng-model="item.xccfDsr.yyz"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">联系电话</label>
              <input type="text" class="form-control" name="xccfDsr.lxdh" ng-model="item.xccfDsr.lxdh"/>
            </div>
            <div class="col-sm-12">
              <label class="entity-label">住址</label>
              <input type="text" class="form-control" name="xccfDsr.zz" ng-model="item.xccfDsr.zz"/>
            </div>
          </div>
        </div>
      </div>
      <!--案件信息-->
      <div id="overrun-edit-case" class="entity-block">
        <header class="entity-block--header">
          <i class="entity-icon icon-case"></i>
          <span>案件信息</span>
        </header>
        <div class="entity-block--body">
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label ">罚款金额</label>

              <div class="input-group">
                <input type="text" class="entity-input form-control" name="fkje" ng-model="item.fkje"
                       validator="required, number"/>

                <div class="input-group-btn">
                  <button class="btn btn-default fa-calculator" type="button" ng-click="calcForfeit()"></button>
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <label class="entity-label ">罚款票据号</label>
              <input type="text" class="form-control" name="fkpjh" ng-model="item.fkpjh"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">询问人姓名</label>
              <input type="text" class="form-control" name="zfxwr" ng-model="item.zfxwr"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">询问人证号</label>
              <input type="text" class="form-control" name="zfxwrzj" ng-model="item.zfxwrzj"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">记录人姓名</label>
              <input type="text" class="form-control" name="zfjlr" ng-model="item.zfjlr"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">记录人证号</label>
              <input type="text" class="form-control" name="zfjlrzj" ng-model="item.zfjlrzj"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">案发时间</label>
              <input type="text" class="form-control" name="afsj" ng-model="item.afsj" readonly
                     today-text="今天" now-text="现在" date-text="日期"
                     time-text="时刻" clear-text="清空" close-text="关闭"
                     datetime-picker="yyyy-MM-dd HH:mm"
                     datepicker-options="dateOptions"
                     timepicker-options="timeOptions"
                     is-open="openDatepicker.afsj"
                     ng-click="openCalendar($event, 'afsj')"/>
            </div>
            <div class="col-sm-12">
              <label class="entity-label">案发地点</label>
              <input type="text" class="form-control" name="afdd" ng-model="item.afdd"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">现场笔录时间</label>
              <input type="text" class="form-control" name="xcblsj" ng-model="item.xcblsj" readonly
                     today-text="今天" now-text="现在" date-text="日期"
                     time-text="时刻" clear-text="清空" close-text="关闭"
                     datetime-picker="yyyy-MM-dd HH:mm"
                     datepicker-options="dateOptions"
                     timepicker-options="timeOptions"
                     is-open="openDatepicker.xcblsj"
                     ng-click="openCalendar($event, 'xcblsj')"/>
            </div>
            <div class="col-sm-12">
              <label class="entity-label">现场笔录地点</label>
              <input type="text" class="form-control" name="xcbldd" ng-model="item.xcbldd"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">询问笔录时间</label>
              <input type="text" class="form-control" name="xwblsj" ng-model="item.xwblsj" readonly
                     today-text="今天" now-text="现在" date-text="日期"
                     time-text="时刻" clear-text="清空" close-text="关闭"
                     datetime-picker="yyyy-MM-dd HH:mm"
                     datepicker-options="dateOptions"
                     timepicker-options="timeOptions"
                     is-open="openDatepicker.xwblsj"
                     ng-click="openCalendar($event, 'xwblsj')"/>
            </div>
            <div class="col-sm-12">
              <label class="entity-label">询问笔录地点</label>
              <input type="text" class="form-control" name="xwbldd" ng-model="item.xwbldd"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-16">
              <label class="entity-label">上传发票证件</label>

              <div class="entity-photo" ng-repeat="image in billImages"
                   ng-click="openLightboxModal(billImages, $index)">
                <img ng-src="{{image.thumbnaildata}}" alt="发票证件"/>
              </div>
              <div ngf-drop ng-model="billFiles" class="entity-upload-photo drop-box"
                   ngf-drag-over-class="dragover" ngf-multiple="true" ngf-allow-dir="true"
                   ngf-accept="'image/*'"></div>
            </div>
          </div>

        </div>
      </div>
      <!--复检单-->
      <div id="overrun-edit-reChecklist" ng-if="item.kfxz == '可卸载'" class="entity-block">
        <header class="entity-block--header">
          <i class="entity-icon icon-reChecklist"></i>
          <span>复检单</span>
        </header>
        <div class="entity-block--body">
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">单号</label>
              <input type="text" class="form-control" name="fjdh" ng-model="item.fjdh"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">时间</label>
              <input type="text" class="form-control" name="fjsj" ng-model="item.fjsj" readonly
                     today-text="今天" now-text="现在" date-text="日期"
                     time-text="时刻" clear-text="清空" close-text="关闭"
                     datetime-picker="yyyy-MM-dd HH:mm"
                     datepicker-options="dateOptions"
                     timepicker-options="timeOptions"
                     is-open="openDatepicker.fjsj"
                     ng-click="openCalendar($event, 'fjsj')"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-4">
              <label class="entity-label">车牌</label>
              <input type="text" class="form-control" name="xccfCl.cp" ng-model="item.xccfCl.cp"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">轴数</label>
              <input type="text" class="form-control" name="xccfCl.zs" ng-model="item.xccfCl.zs"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">{{ typeLabel }}</label>
              <!-- ngIf 有自己的作用域，要么对象访问，要么通过 $parent -->
              <input type="text" class="form-control" name="reChecklistValue" ng-model="$parent.reChecklistValue"/>
            </div>
            <div class="col-sm-4">
              <label class="entity-label">{{ overTypeLabel }}</label>

              <div class="input-group">
                <input type="text" class="entity-input form-control" name="reChecklistOverValue" ng-model="$parent.reChecklistOverValue"
                       validator="required, number" message-id="re-checklist-overvalue-msg"/>

                <div class="input-group-btn">
                  <button class="btn btn-default fa-calculator" type="button" ng-click="calcReChecklistOverValue()"></button>
                </div>
              </div>
              <span id="re-checklist-overvalue-msg"></span>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>
    <button type="button" class="btn btn-default" validation-submit="form" ng-click="save()">保存</button>
    <button type="button" class="btn btn-primary" ng-click="done()">结案</button>
  </div>
</form>


